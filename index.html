<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Forumate</title>
<style>
body {
  margin:0; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background:url('wallpaper.png') no-repeat center center fixed;
  background-size:cover; color:#fff;
}
body::before {
  content:""; position:fixed; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.4); z-index:-1;
}

/* Header circular */
header {
  position: fixed; top: 10px; left: 50%; transform: translateX(-50%);
  width: 90px; height: 90px;
  background: rgba(66,103,178,0.7); backdrop-filter: blur(12px);
  border-radius: 50%; display:flex; justify-content:center; align-items:center;
  font-size:16px; font-weight:bold; border:2px solid rgba(255,255,255,0.3);
  z-index:1000;
}

/* Admin button */
#adminBtn {
  position: absolute; top:-5px; right:-5px; width:30px; height:30px;
  border-radius:50%; background: rgba(244,67,54,0.85); color:white;
  font-weight:bold; font-size:16px; border:none; cursor:pointer; display:none;
}

/* Admin panel popup */
#adminPanel {
  display:none; position:fixed; top:100px; left:50%; transform:translateX(-50%);
  background: rgba(50,50,50,0.9); backdrop-filter: blur(12px); border-radius:10px;
  padding:15px; min-width:200px; z-index:1010;
}
#adminPanel button {
  width:100%; padding:10px; margin:5px 0; border:none; border-radius:6px;
  background: rgba(66,103,178,0.8); color:white; cursor:pointer;
}
#adminPanel button:hover { background: rgba(66,103,178,1); }

/* Login popup */
#loginPopup {
  display:flex; justify-content:center; align-items:center;
  position:fixed; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.6); z-index:2000;
}
#loginPopup div {
  background: rgba(50,50,50,0.9); backdrop-filter: blur(12px); padding:20px; border-radius:12px;
  display:flex; flex-direction:column; min-width:250px;
}
#loginPopup input {
  margin:5px 0; padding:10px; border-radius:10px; border:none; font-size:14px;
}

/* Main forum */
main {
  max-width:700px; margin:140px auto 30px; padding:0 15px;
}
input, textarea {
  width:100%; padding:12px; margin:8px 0; border-radius:12px;
  border:1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.2);
  color:#fff; font-size:16px; box-sizing:border-box; backdrop-filter:blur(10px);
  resize:none;
}
input::placeholder, textarea::placeholder { color: rgba(255,255,255,0.7); }
#postBtn {
  width:100%; padding:12px; border-radius:12px; border:none;
  background: rgba(66,103,178,0.8); color:#fff; font-size:16px; cursor:pointer;
}
#postBtn:hover { background: rgba(66,103,178,1); }

.post {
  background: rgba(255,255,255,0.15); backdrop-filter: blur(10px);
  border-radius:12px; padding:15px 20px; margin-bottom:12px;
  border:1px solid rgba(255,255,255,0.2); word-wrap: break-word;
  opacity:0; animation:fadeIn 0.5s forwards;
}
.post.pinned { border:2px solid gold; background: rgba(255,215,0,0.15); }
.post .name.owner { color:red; font-weight:bold; }

.postMenuBtn {
  float:right; cursor:pointer; color: #ccc; font-weight:bold;
}

@keyframes fadeIn { from{opacity:0;} to{opacity:1;} }

@media(max-width:768px){
  header{width:70px;height:70px;font-size:14px;}
  #adminBtn{width:28px;height:28px;font-size:14px;top:-4px;right:-4px;}
  input,textarea,#postBtn,#adminPanel button{font-size:14px;padding:10px;}
  main{margin-top:110px;}
}
@media(max-width:480px){
  header{width:60px;height:60px;font-size:12px;}
  #adminBtn{width:25px;height:25px;font-size:12px;top:-3px;right:-3px;}
  input,textarea,#postBtn,#adminPanel button{font-size:13px;padding:8px;}
  main{margin-top:90px;}
}
</style>
</head>
<body>

<header>Forumate
  <button id="adminBtn" onclick="toggleAdminPanel()">A</button>
</header>

<div id="adminPanel">
  <button onclick="adminReset()">Reset All Posts</button>
  <button onclick="createPinnedPost()">Make Pinned Post</button>
  <button onclick="alert('Future action placeholder')">Other Action</button>
</div>

<div id="loginPopup">
  <div>
    <h3>Admin Login</h3>
    <input id="loginName" placeholder="Username">
    <input id="loginPass" type="password" placeholder="Password">
    <button onclick="loginAdmin()">Login</button>
  </div>
</div>

<main>
  <input type="text" id="name" placeholder="Your name">
  <textarea id="message" placeholder="Your message" rows="3"></textarea>
  <button id="postBtn" onclick="postMessage()">Post</button>
  <div id="posts"></div>
</main>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyA1pylg4PQS_hXhKiLvYcdgh5jbLYhME40",
  authDomain: "html-test-forum.firebaseapp.com",
  databaseURL: "https://html-test-forum-default-rtdb.firebaseio.com",
  projectId: "html-test-forum",
  storageBucket: "html-test-forum.firebasestorage.app",
  messagingSenderId: "781492084495",
  appId: "1:781492084495:web:309c83e29024ba321ba87a",
  measurementId: "G-H877ZK81ZM"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const postsDiv = document.getElementById('posts');

let isAdmin=false;

function postMessage(){
  const nameInput = document.getElementById('name').value.trim();
  const messageInput = document.getElementById('message').value.trim();
  if(!nameInput || !messageInput) return alert('Name and message required');
  const timestamp = new Date().toLocaleString();
  const postData = {name:nameInput, message:messageInput, timestamp};
  if(isAdmin){ postData.admin=true; postData.name='OWNER'; }
  db.ref('posts').push(postData);
  document.getElementById('name').value=''; document.getElementById('message').value='';
}

db.ref('posts').on('value', snapshot=>{
  postsDiv.innerHTML='';
  snapshot.forEach(child=>{
    const data = child.val();
    const div = document.createElement('div');
    div.className='post'; 
    if(data.pinned) div.classList.add('pinned');
    let nameClass = (data.admin)?'name owner':'name';
    let postHTML=`<div class="${nameClass}">${data.name}
      ${isAdmin?'<span class="postMenuBtn" onclick="removePost(\''+child.key+'\')">â‹®</span>':''}</div>
      <div class="message">${data.message}</div>
      <div class="timestamp">${data.timestamp}</div>`;
    div.innerHTML=postHTML;
    postsDiv.prepend(div);
  });
});

const loginPopup=document.getElementById('loginPopup');
const adminBtn=document.getElementById('adminBtn');
const adminPanel=document.getElementById('adminPanel');

function loginAdmin(){
  const user=document.getElementById('loginName').value.trim();
  const pass=document.getElementById('loginPass').value.trim();
  if(user==='melting' && pass==='melting'){
    isAdmin=true;
    loginPopup.style.display='none';
    adminBtn.style.display='block';
    alert('Admin logged in!');
  } else alert('Wrong credentials');
}

function toggleAdminPanel(){
  adminPanel.style.display=(adminPanel.style.display==='block')?'none':'block';
}

function adminReset(){
  if(confirm("Are you sure to reset all posts?")){
    db.ref('posts').remove();
    adminPanel.style.display='none';
  }
}

function createPinnedPost(){
  const name='OWNER';
  const message=prompt("Pinned post message:");
  if(!message) return alert('Message required');
  const timestamp = new Date().toLocaleString();
  db.ref('posts').push({name,message,timestamp,admin:true,pinned:true});
  adminPanel.style.display='none';
}

function removePost(key){
  if(confirm('Delete this post?')) db.ref('posts/'+key).remove();
}
</script>

</body>
</html>
